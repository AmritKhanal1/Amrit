<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign In / Sign Up | Responsive Auth</title>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,800" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<style>
:root {
    --primary-blue: #2a68c0;
    --primary-green: #4CAF50;
    --primary-yellow: #FFC107;
    --background-light: #f5f7fa;
    --text-dark: #333;
    --text-secondary: #2b1547;
    --shadow-color: rgba(0,0,0,0.15);
}
* { box-sizing: border-box; }
body {
    background: var(--background-light);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-family: 'Montserrat', sans-serif;
    height: 100vh;
    margin: -20px 0 50px;
    color: var(--text-dark); 
}
h1 { font-weight: 700; margin: 0; color: var(--text-dark); font-size: 28px; }
p { font-size: 14px; font-weight: 400; line-height: 20px; letter-spacing: 0.5px; margin: 20px 0 30px; color: var(--text-secondary); }
span { font-size: 12px; color: var(--text-secondary); }
a { color: var(--primary-blue); font-size: 14px; text-decoration: none; margin: 15px 0; transition: color 0.3s ease; }
a:hover { color: var(--primary-green); }
button {
    border-radius: 20px;
    border: 1px solid var(--primary-blue);
    background-color: var(--primary-blue);
    color: #fff;
    font-size: 12px;
    font-weight: bold;
    padding: 12px 45px;
    letter-spacing: 1px;
    text-transform: uppercase;
    transition: transform 80ms ease-in, background-color 0.3s, box-shadow 0.3s;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(42, 104, 192, 0.3);
}
button.ghost { background-color: transparent; border-color: #fff; color: #fff; }
button:hover { background-color: #3b76c9; }
button.ghost:hover { background-color: rgba(255,255,255,0.15); }
button:active { transform: scale(0.95); }
button:focus { outline: none; }
form {
    background-color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    padding: 0 50px;
    height: 100%;
    text-align: center;
}
input {
    background-color: #eee;
    border: none;
    padding: 12px 15px;
    margin: 8px 0;
    width: 100%;
    border-radius: 5px;
    transition: border 0.3s;
}
input:focus { outline: none; border: 1px solid var(--primary-blue); background-color: #fff; }
.container {
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 14px 28px var(--shadow-color), 0 10px 10px rgba(0,0,0,0.18);
    position: relative;
    overflow: hidden;
    width: 768px;
    max-width: 100%;
    min-height: 480px;
}
.form-container { position: absolute; top:0; height:100%; transition: all 0.6s ease-in-out; }
.sign-in-container { left: 0; width:50%; z-index:2; }
.container.right-panel-active .sign-in-container { transform: translateX(100%); }
.sign-up-container { left:0; width:50%; opacity:0; z-index:1; }
.container.right-panel-active .sign-up-container { transform: translateX(100%); opacity:1; z-index:5; animation: show 0.6s; }
@keyframes show { 0%,49.99% {opacity:0; z-index:1;} 50%,100% {opacity:1; z-index:5;} }
.overlay-container { position:absolute; top:0; left:50%; width:50%; height:100%; overflow:hidden; transition: transform 0.6s ease-in-out; z-index:100; }
.container.right-panel-active .overlay-container { transform: translateX(-100%); }
.overlay {
    background: linear-gradient(to right, var(--primary-green), var(--primary-blue));
    color: #fff;
    position: relative;
    left:-100%;
    height:100%;
    width:200%;
    transform: translateX(0);
    transition: transform 0.6s ease-in-out;
}
.container.right-panel-active .overlay { transform: translateX(50%); }
.overlay-panel {
    position:absolute;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    padding:0 40px;
    text-align:center;
    top:0;
    height:100%;
    width:50%;
    transform:translateX(0);
    transition: transform 0.6s ease-in-out;
    color:#fff;
}
.overlay-left { transform: translateX(-20%); }
.container.right-panel-active .overlay-left { transform: translateX(0); }
.overlay-right { right:0; transform: translateX(0); }
.container.right-panel-active .overlay-right { transform: translateX(20%); }
.mobile-switch { display:none; margin-top:20px; }
.social-container { margin:20px 0; }
.social-container a {
    border:1px solid #ddd;
    border-radius:50%;
    display:inline-flex;
    justify-content:center;
    align-items:center;
    margin:0 5px;
    height:40px;
    width:40px;
    transition: all 0.3s;
    color: var(--text-secondary);
}
.social-container a:hover { background-color: var(--primary-yellow); border-color: var(--primary-yellow); color: var(--text-dark); }
@media(max-width:480px){
    .container { width:95%; min-height:550px; height:100%; }
    .overlay-container { display:none; }
    .form-container { position:absolute; width:100%; height:100%; top:0; left:0; padding:40px 20px; transform:none !important; }
    .sign-in-container { opacity:1; z-index:2; }
    .sign-up-container { opacity:0; z-index:1; animation:none; }
    .container.right-panel-active .sign-in-container { opacity:0; z-index:1; }
    .container.right-panel-active .sign-up-container { opacity:1; z-index:2; }
    .mobile-switch { display:block; }
    footer p { font-size:12px; padding:0 10px; }
}
</style>
</head>
<body>
<div class="container" id="container">

<!-- SIGN UP -->
<div class="form-container sign-up-container" id="signUpContainer">
    <form>
        <h1>Create Account</h1>
        <div class="social-container">
            <a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
            <a href="#" class="social"><i class="fab fa-linkedin-in"></i></a>
        </div>
        <span>or use your email for registration</span>
        <input type="text" id="signup-name" placeholder="Name" required />
        <input type="email" id="signup-email" placeholder="Email" required />
        <input type="password" id="signup-password" placeholder="Password" required />
        <input type="password" id="signup-confirm" placeholder="Confirm Password" required />
        <button type="button" id="signup-btn">Sign Up</button>
        <p class="mobile-switch">Already have an account? <a href="#" id="mobileSignInLink">Sign In</a></p>
    </form>
</div>

<!-- SIGN IN -->
<div class="form-container sign-in-container" id="signInContainer">
    <form>
        <h1>Sign in</h1>
        <div class="social-container">
            <a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
            <a href="#" class="social"><i class="fab fa-linkedin-in"></i></a>
        </div>
        <span>or use your account</span>
        <input type="email" id="signin-email" placeholder="Email" required />
        <input type="password" id="signin-password" placeholder="Password" required />
        <a href="forgot.html" id="forgot-password">Forgot your password?</a>
        <button type="button" id="signin-btn">Sign In</button>
        <p class="mobile-switch">Don't have an account? <a href="#" id="mobileSignUpLink">Sign Up</a></p>
    </form>
</div>

<!-- OVERLAY -->
<div class="overlay-container">
    <div class="overlay">
        <div class="overlay-panel overlay-left">
            <h1>Welcome Back!</h1>
            <p>To keep connected with us please login with your personal info</p>
            <button class="ghost" id="signIn">Sign In</button>
        </div>
        <div class="overlay-panel overlay-right">
            <h1>Hello, Friend!</h1>
            <p>Enter your personal details and start journey with us</p>
            <button class="ghost" id="signUp">Sign Up</button>
        </div>
    </div>
</div>
</div>

<script type="module">
// ===== Firebase =====
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendEmailVerification, signOut } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

const firebaseConfig = {
    apiKey: "AIzaSyBOcn0cbiBx1jfrZAG4DdAj-W63-6YJDVE",
    authDomain: "shikshaflow-auth.firebaseapp.com",
    projectId: "shikshaflow-auth",
    storageBucket: "shikshaflow-auth.firebasestorage.app",
    messagingSenderId: "730477172186",
    appId: "1:730477172186:web:00b8d401928a89ac35dce3"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// DOM
const signUpButton = document.getElementById('signUp');
const signInButton = document.getElementById('signIn');
const container = document.getElementById('container');
const mobileSignUpLink = document.getElementById('mobileSignUpLink');
const mobileSignInLink = document.getElementById('mobileSignInLink');

const signupBtn = document.getElementById('signup-btn');
const signinBtn = document.getElementById('signin-btn');

const signupEmail = document.getElementById('signup-email');
const signupPassword = document.getElementById('signup-password');
const signupConfirm = document.getElementById('signup-confirm');

const signinEmail = document.getElementById('signin-email');
const signinPassword = document.getElementById('signin-password');

const signupMsg = document.createElement("p");
signupEmail.parentNode.insertBefore(signupMsg, signupConfirm.nextSibling);
const signinMsg = document.createElement("p");
signinEmail.parentNode.insertBefore(signinMsg, signinPassword.nextSibling);

function showMessage(el, msg, color="red"){ el.textContent=msg; el.style.color=color; el.style.fontSize="14px"; }

// Panel switch
function togglePanel(activeRight){ 
    if(activeRight){ container.classList.add("right-panel-active"); document.title="Create Account | Sign Up Form"; } 
    else{ container.classList.remove("right-panel-active"); document.title="Sign In | Login Form"; } 
}
if(signUpButton) signUpButton.addEventListener('click', ()=>togglePanel(true));
if(signInButton) signInButton.addEventListener('click', ()=>togglePanel(false));
if(mobileSignUpLink) mobileSignUpLink.addEventListener('click', e=>{e.preventDefault(); togglePanel(true);});
if(mobileSignInLink) mobileSignInLink.addEventListener('click', e=>{e.preventDefault(); togglePanel(false);});

// SIGN UP
signupBtn.addEventListener('click', async ()=>{
    const email=signupEmail.value.trim();
    const password=signupPassword.value.trim();
    const confirm=signupConfirm.value.trim();
    showMessage(signupMsg,"");

    if(!email||!password||!confirm) return showMessage(signupMsg,"Please fill all fields.");
    if(password!==confirm) return showMessage(signupMsg,"Passwords do not match.");
    if(password.length<6) return showMessage(signupMsg,"Password must be at least 6 chars.");

    try{
        const userCred = await createUserWithEmailAndPassword(auth,email,password);
        await sendEmailVerification(userCred.user);
        showMessage(signupMsg,`✅ Account created! Verify email sent to ${email}`,"green");
        signupEmail.value=""; signupPassword.value=""; signupConfirm.value="";
    }catch(err){
        if(err.code==="auth/email-already-in-use") showMessage(signupMsg,"Email already registered.");
        else if(err.code==="auth/invalid-email") showMessage(signupMsg,"Invalid email format.");
        else showMessage(signupMsg,err.message);
    }
});

// SIGN IN
signinBtn.addEventListener('click', async ()=>{
    const email=signinEmail.value.trim();
    const password=signinPassword.value.trim();
    showMessage(signinMsg,"");

    if(!email||!password) return showMessage(signinMsg,"Please fill all fields.");

    try{
        const userCred = await signInWithEmailAndPassword(auth,email,password);
        const user = userCred.user;
        if(!user.emailVerified){
            await signOut(auth);
            return showMessage(signinMsg,"Please verify your email first.");
        }
        showMessage(signinMsg,`✅ Logged in as ${user.email}`,"green");
        signinEmail.value=""; signinPassword.value="";
        setTimeout(()=>window.location.href="index.html",1000);
    }catch(err){
        switch(err.code){
            case "auth/user-not-found": showMessage(signinMsg,"No account found with this email."); break;
            case "auth/wrong-password": showMessage(signinMsg,"Incorrect password."); break;
            case "auth/invalid-email": showMessage(signinMsg,"Invalid email address."); break;
            default: showMessage(signinMsg,"Login failed. Try again.");
        }
    }
});
</script>
</body>
</html>
