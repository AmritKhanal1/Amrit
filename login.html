<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign In / Sign Up | ShikshaFlow</title>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,800" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
:root {
    --primary-blue: #2a68c0;
    --primary-green: #4CAF50;
    --primary-yellow: #FFC107;
    --background-light: #f5f7fa;
    --text-dark: #333333;
    --text-secondary: #6c757d;
    --shadow-color: rgba(0,0,0,0.15);
}
* { box-sizing: border-box; }
body {
    background: var(--background-light);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: 'Montserrat', sans-serif;
}
h1 { font-weight: 700; margin: 0; }
p { margin: 10px 0; font-size:14px; }
span { font-size:12px; color:var(--text-secondary); }
button {
    border-radius: 20px; border:1px solid var(--primary-blue);
    background-color: var(--primary-blue);
    color: white; font-weight: bold;
    padding: 12px 45px; cursor:pointer;
    transition: 0.3s;
}
button:hover { background-color:#3b76c9; }
button.ghost { background-color:transparent; border-color:#fff; color:#fff; }
input { width:100%; padding:12px; margin:8px 0; border-radius:5px; border:1px solid #ccc; }
input:focus { outline:none; border-color: var(--primary-blue); }

.container { background:white; width:768px; max-width:100%; min-height:480px; border-radius:10px; position:relative; overflow:hidden; box-shadow:0 14px 28px var(--shadow-color), 0 10px 10px rgba(0,0,0,0.18);}
.form-container { position:absolute; top:0; height:100%; transition: all 0.6s ease-in-out; padding:50px; text-align:center; }
.sign-in-container { left:0; width:50%; z-index:2; }
.container.right-panel-active .sign-in-container { transform: translateX(100%); }
.sign-up-container { left:0; width:50%; opacity:0; z-index:1; }
.container.right-panel-active .sign-up-container { transform: translateX(100%); opacity:1; z-index:5; }
.overlay-container { position:absolute; top:0; left:50%; width:50%; height:100%; overflow:hidden; transition:0.6s; z-index:100; }
.container.right-panel-active .overlay-container { transform: translateX(-100%); }
.overlay { background: linear-gradient(to right, var(--primary-green), var(--primary-blue)); color:white; position:relative; left:-100%; height:100%; width:200%; transition:0.6s; }
.container.right-panel-active .overlay { transform: translateX(50%); }
.overlay-panel { position:absolute; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; top:0; height:100%; width:50%; transition:0.6s; padding:0 40px; }
.overlay-left { transform: translateX(-20%); }
.container.right-panel-active .overlay-left { transform: translateX(0); }
.overlay-right { right:0; transform:translateX(0); }
.container.right-panel-active .overlay-right { transform: translateX(20%); }

p.error { color:red; font-size:13px; margin:5px 0; }
p.success { color:green; font-size:13px; margin:5px 0; }

@media(max-width:480px){
    .container { width:95%; min-height:550px; }
    .overlay-container { display:none; }
    .form-container { width:100%; left:0; padding:40px 20px; position:absolute; }
}
</style>
</head>
<body>

<div class="container" id="container">
<!-- Sign Up -->
<div class="form-container sign-up-container">
<h1>Create Account</h1>
<input type="text" id="signup-name" placeholder="Name" required>
<input type="email" id="signup-email" placeholder="Email" required>
<input type="password" id="signup-password" placeholder="Password" required>
<input type="password" id="signup-confirm" placeholder="Confirm Password" required>
<button id="signup-btn">Sign Up</button>
<p id="signup-error" class="error"></p>
</div>

<!-- Sign In -->
<div class="form-container sign-in-container">
<h1>Sign In</h1>
<input type="email" id="signin-email" placeholder="Email" required>
<input type="password" id="signin-password" placeholder="Password" required>
<button id="signin-btn">Sign In</button>
<p id="signin-error" class="error"></p>
</div>

<!-- Overlay -->
<div class="overlay-container">
<div class="overlay">
<div class="overlay-panel overlay-left">
<h1>Welcome Back!</h1>
<p>Login with your personal info</p>
<button class="ghost" id="signIn">Sign In</button>
</div>
<div class="overlay-panel overlay-right">
<h1>Hello, Friend!</h1>
<p>Enter your details and start journey with us</p>
<button class="ghost" id="signUp">Sign Up</button>
</div>
</div>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendEmailVerification } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

// ===== Firebase Config =====
const firebaseConfig = {
    apiKey: "AIzaSyBOcn0cbiBx1jfrZAG4DdAj-W63-6YJDVE",
    authDomain: "shikshaflow-auth.firebaseapp.com",
    projectId: "shikshaflow-auth",
    storageBucket: "shikshaflow-auth.firebasestorage.app",
    messagingSenderId: "730477172186",
    appId: "1:730477172186:web:00b8d401928a89ac35dce3"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// ===== DOM Elements =====
const signUpButton = document.getElementById('signUp');
const signInButton = document.getElementById('signIn');
const container = document.getElementById('container');

const signupBtn = document.getElementById('signup-btn');
const signinBtn = document.getElementById('signin-btn');

const signupName = document.getElementById('signup-name');
const signupEmail = document.getElementById('signup-email');
const signupPassword = document.getElementById('signup-password');
const signupConfirm = document.getElementById('signup-confirm');
const signupError = document.getElementById('signup-error');

const signinEmail = document.getElementById('signin-email');
const signinPassword = document.getElementById('signin-password');
const signinError = document.getElementById('signin-error');

// ===== Panel Toggle =====
signUpButton.addEventListener('click', ()=> container.classList.add("right-panel-active"));
signInButton.addEventListener('click', ()=> container.classList.remove("right-panel-active"));

// ===== Validation =====
function validateEmail(email){ return email.includes('@') && /\S+@\S+\.\S+/.test(email);}
function validatePassword(password){ return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(password);}

// ===== Signup =====
signupBtn.addEventListener('click', async () => {
    signupError.textContent='';
    const name = signupName.value.trim();
    const email = signupEmail.value.trim();
    const password = signupPassword.value;
    const confirm = signupConfirm.value;

    if(!name||!email||!password||!confirm){ signupError.textContent="Please fill all fields."; return;}
    if(!validateEmail(email)){ signupError.textContent="Enter a valid email (must include @)."; return;}
    if(!validatePassword(password)){ signupError.textContent="Password must be 8+ chars, include uppercase, lowercase, number."; return;}
    if(password!==confirm){ signupError.textContent="Passwords do not match."; return;}

    try{
        const userCredential = await createUserWithEmailAndPassword(auth,email,password);
        await sendEmailVerification(userCredential.user);
        signupError.textContent=`Account created! Verification email sent to ${email}`;
        signupError.className="success";
        signupName.value=''; signupEmail.value=''; signupPassword.value=''; signupConfirm.value='';
    }catch(error){
        if(error.code==="auth/email-already-in-use") signupError.textContent="This email is already registered.";
        else signupError.textContent=error.message;
        signupError.className="error";
    }
});

// ===== Signin =====
signinBtn.addEventListener('click', async () => {
    signinError.textContent='';
    const email = signinEmail.value.trim();
    const password = signinPassword.value;

    if(!email||!password){ signinError.textContent="Please fill all fields."; return;}
    if(!validateEmail(email)){ signinError.textContent="Enter a valid email."; return;}

    try{
        const userCredential = await signInWithEmailAndPassword(auth,email,password);
        const user = userCredential.user;
        if(!user.emailVerified){ signinError.textContent="Please verify your email before login!"; return;}

        signinError.textContent=`Logged in as ${user.email}`;
        signinError.className="success";

        signinEmail.value=''; signinPassword.value='';
        window.location.href="index.html"; // redirect to homepage
    }catch(error){
        if(error.code==="auth/user-not-found") signinError.textContent="No account found with this email.";
        else if(error.code==="auth/wrong-password") signinError.textContent="Incorrect password.";
        else signinError.textContent=error.message;
        signinError.className="error";
    }
});
</script>

</body>
</html>